name: Neira Archivist Data Backup
run-name: üóÉÔ∏è Data backup by @${{ github.actor }} on ${{ github.ref }}

on:
  workflow_dispatch: # –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É Actions
  push:
    branches: # –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—É—à–µ –≤ main
      - main

jobs:
  archive-data:
    runs-on: ubuntu-latest
    permissions:
      contents: write # –î–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (–¥–ª—è –∫–æ–º–º–∏—Ç–∞)

    steps:
      - name: üõéÔ∏è Checkout repository
        uses: actions/checkout@v4

      - name: üêç Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: üì¶ Install dependencies
        run: pip install PyGithub

      - name: üöÄ Run Archivation Script
        run: python .github/scripts/neira_archivist.py
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # –ü–µ—Ä–µ–¥–∞–µ–º –≤ —Å–∫—Ä–∏–ø—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

      - name: üíæ Commit and Push changes
        uses: EndBug/add-and-commit@v9
        with:
          author_name: GitHub Actions
          author_email: actions@users.noreply.github.com
          message: "üóÉAutomated data backup by Neira-Archivist"
          # add: "." # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –Ω–µ –≤—Å–µ —Ñ–∞–π–ª—ã
